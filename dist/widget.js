var RA360Widget=function(N){"use strict";const ce='@import"https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Manrope:wght@400;600;700&display=swap";:host{display:block;background:transparent}#ra{all:initial;--ra-text: #3d2a1f;--ra-muted: #7a6251;--ra-bg-card: #fff7f2;--ra-bg-soft: #fff1e8;--ra-border: #ffd8c2;--ra-border-strong: #ffb894;--ra-accent: #ff6b00;--ra-accent-dark: #e85d00;--ra-focus: rgba(77, 163, 255, .45);--ra-cream-shadow: rgba(255, 140, 64, .18);--ra-cream-glow: rgba(255, 107, 0, .16);--ra-overlay: rgba(0, 0, 0, .58);--ra-soft-white: #ffffff;font-family:Manrope,Inter,Segoe UI,system-ui,sans-serif;color:var(--ra-text);font-size:16px;line-height:1.5;width:100%;height:100%;text-rendering:optimizeLegibility}#ra.mode-article{--ra-text: #1f2933;--ra-muted: #4b5563;--ra-bg-card: #f7f5f2;--ra-bg-soft: #f0eeeb;--ra-border: #e3dfd7;--ra-border-strong: #d5cfc4;--ra-accent: #f0944e;--ra-accent-dark: #d8782f;--ra-cream-shadow: rgba(0, 0, 0, .06);--ra-cream-glow: rgba(240, 148, 78, .16);font-size:15px;line-height:1.6}#ra *,#ra *:before,#ra *:after{box-sizing:border-box}.ra360{position:relative;display:flex;flex-direction:column;width:100%;height:100%}.mode-article .ra360{max-width:760px;margin:0 auto;gap:10px}.article-bridge{margin:0 0 6px;color:var(--ra-muted);font-size:.95rem}.article-preview{display:flex;align-items:center;gap:10px;width:100%;padding:12px 14px;border:1px solid var(--ra-border);border-radius:14px;background:var(--ra-soft-white);color:var(--ra-text);cursor:pointer;text-align:left;box-shadow:none;transition:border-color .18s ease,background .18s ease,transform .18s ease}.article-preview:hover,.article-preview:focus-visible{background:var(--ra-bg-card);border-color:var(--ra-border-strong);transform:translateY(-1px)}.outline-icon{display:inline-flex;align-items:center;justify-content:center;width:44px;height:44px;border-radius:12px;border:1px solid var(--ra-border);background:var(--ra-bg-soft);color:var(--ra-accent)}.outline-icon svg{width:20px;height:20px}.preview-text{flex:1;font-weight:600}.preview-cta{font-weight:700;color:var(--ra-accent);font-size:.95rem}.article-panel{overflow:hidden;border:1px solid var(--ra-border);border-radius:14px;background:var(--ra-soft-white);box-shadow:none;max-height:0;opacity:0;transition:max-height .2s ease,opacity .2s ease}.article-panel.open{opacity:1}.article-panel-head{display:flex;align-items:flex-start;justify-content:space-between;gap:12px;padding:12px 14px 4px}.panel-kicker{font-size:.8rem;letter-spacing:.08em;text-transform:uppercase;color:var(--ra-muted)}.panel-title{flex:1;font-weight:700;color:var(--ra-text);font-size:1rem}.text-btn{border:none;background:transparent;color:var(--ra-muted);text-decoration:underline;font-weight:600;padding:6px 8px;cursor:pointer}.ra360 button{font-family:inherit;border-radius:14px;border:1px solid transparent;background:transparent;color:inherit;transition:box-shadow .25s ease,transform .25s ease,border-color .25s ease,background .25s ease}.ra360 button:focus-visible,.ra360 input:focus-visible,.ra360 select:focus-visible,.ra360 textarea:focus-visible{outline:3px solid var(--ra-focus);outline-offset:2px;box-shadow:0 0 0 4px #4da3ff26}.widget-card{position:relative;display:grid;justify-items:center;gap:14px;padding:28px 26px;border-radius:20px;border:1px solid var(--ra-border);background:var(--ra-bg-card);color:var(--ra-text);box-shadow:0 18px 40px var(--ra-cream-shadow);transition:transform .25s ease,box-shadow .25s ease;cursor:pointer;text-align:center}.widget-card:after{content:"";position:absolute;inset:0;border-radius:20px;border:2px solid transparent;transition:border-color .25s ease,box-shadow .25s ease}.widget-card:hover,.widget-card:focus-visible{transform:translateY(-4px);box-shadow:0 28px 56px #ff8c403d}.widget-card:focus-visible:after{border-color:#ff8c4073;box-shadow:0 0 0 6px #4da3ff38}.widget-card h3{margin:0;font-size:1.4rem;font-weight:700}.widget-card .card-subtitle{margin:0;font-size:.96rem;color:var(--ra-muted);max-width:28ch}.card-icon-trio{display:flex;gap:10px}.icon-pill{display:inline-flex;align-items:center;justify-content:center;width:46px;height:46px;border-radius:16px;background:var(--ra-bg-soft);border:1px solid var(--ra-border);color:var(--ra-accent);font-size:1.4rem}.widget-card .cta-inline{display:inline-flex;align-items:center;gap:6px;font-weight:700;color:var(--ra-accent);text-decoration:underline;text-decoration-thickness:2px;text-decoration-color:#ff6b008c}.modal-backdrop{position:relative;display:none;align-items:center;justify-content:center;width:100%;height:100%;padding:16px;background:transparent;backdrop-filter:none;z-index:1;overflow:hidden}.mode-article .modal-backdrop{position:static;display:block;padding:0 14px 16px;background:transparent;box-shadow:none}.micro-benefits{display:flex;flex-wrap:wrap;gap:8px 10px;list-style:none;padding:8px 0 12px;margin:0;color:var(--ra-muted);font-size:.9rem}.micro-benefits li{padding:6px 10px;border-radius:10px;border:1px dashed var(--ra-border);background:#00000005}.modal-backdrop:before{display:none}.modal-backdrop.open{display:flex;animation:fadeIn .25s ease}.modal{width:min(920px,92vw);max-height:90vh;background:var(--ra-soft-white);border-radius:16px;border:1px solid var(--ra-border);box-shadow:0 24px 60px #032a5340,0 0 120px #3b82f640;display:flex;flex-direction:column;overflow:hidden;position:relative}.mode-article .modal{width:100%;max-height:none;border-radius:12px;border-color:var(--ra-border);box-shadow:none}.modal main{flex:1;overflow-y:auto;padding:28px 32px;background:var(--ra-soft-white);min-height:0}.mode-article .modal main{padding:18px}.modal header,.modal main,.modal footer{width:100%;max-width:unset;margin:0}.modal header{padding:26px 32px 20px;border-bottom:1px solid var(--ra-border);background:var(--ra-bg-soft)}.mode-article .modal header{padding:18px 18px 12px;background:transparent;border-bottom-color:var(--ra-border)}.modal header h2{margin:0;font-size:1.45rem;font-weight:700;display:flex;align-items:center;gap:10px}.mode-article .modal header h2{font-size:1.2rem}.modal header p{margin:8px 0 0;color:var(--ra-muted);font-size:.96rem}.mode-article .modal header p{font-size:.94rem}.progress-bar{margin-top:18px;height:6px;width:100%;background:#ffd8c299;border-radius:999px;overflow:hidden}.mode-article .progress-bar{height:4px;background:#e4dfd7cc}.progress-bar span{display:block;height:100%;width:0;background:linear-gradient(90deg,#ff9f4d,var(--ra-accent));border-radius:inherit;transition:width .35s ease}.progress-label{margin-top:8px;font-size:.9rem;color:var(--ra-muted);font-weight:600;text-align:right}.step{display:none;animation:slideIn .35s ease}.step.active{display:block}.categories-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:16px;margin:24px 0 20px}.mode-article .categories-grid{gap:12px;margin:16px 0 12px}.category-option{position:relative;display:flex;flex-direction:column;gap:8px;padding:16px;border-radius:16px;border:1px solid var(--ra-border);background:var(--ra-bg-soft);color:inherit;text-align:left;font-weight:600;cursor:pointer;transition:transform .2s ease,border-color .2s ease,box-shadow .2s ease}.mode-article .category-option{padding:12px 12px 10px;background:var(--ra-soft-white);box-shadow:none}.category-option .category-icon{font-size:1.8rem}.mode-article .category-option .category-icon svg{width:20px;height:20px}.category-option span{font-size:.85rem;font-weight:500;color:var(--ra-accent)}.category-option.active{border-color:var(--ra-accent);background:var(--ra-bg-card);box-shadow:0 12px 30px var(--ra-cream-shadow);transform:translateY(-2px)}.mode-article .category-option.active{transform:none;box-shadow:none;background:var(--ra-bg-soft);border-color:var(--ra-border-strong)}.category-option:focus-visible{outline:none;box-shadow:0 0 0 4px #4da3ff33}.primary-btn,.secondary-btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;border-radius:18px;padding:12px 26px;font-weight:700;cursor:pointer;border:1px solid transparent;transition:transform .2s ease,box-shadow .2s ease,background .2s ease,border-color .2s ease}.mode-article .primary-btn,.mode-article .secondary-btn{border-radius:12px;padding:10px 18px;font-weight:700}.primary-btn{background:linear-gradient(180deg,#ff7a1a 0%,var(--ra-accent) 100%);color:#fff;border-color:var(--ra-border-strong);box-shadow:0 16px 34px #ff6b0047}.mode-article .primary-btn{background:linear-gradient(180deg,#f9ae75 0%,var(--ra-accent) 100%);box-shadow:none;border-color:var(--ra-border)}.primary-btn:disabled{cursor:not-allowed;opacity:.55;box-shadow:none}.primary-btn:not(:disabled):hover,.primary-btn:not(:disabled):focus-visible{transform:translateY(-1px);box-shadow:0 20px 46px #ff6b005c}.secondary-btn{background:var(--ra-bg-soft);color:var(--ra-text);border-color:var(--ra-border)}.mode-article .secondary-btn{background:var(--ra-soft-white)}.secondary-btn:hover,.secondary-btn:focus-visible{background:#ffe8da;box-shadow:0 10px 22px var(--ra-cream-shadow)}.step-actions{display:flex;flex-wrap:wrap;gap:12px;justify-content:flex-end;margin-top:28px}.question-header{display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:18px;color:var(--ra-muted);font-size:.95rem}.has-outline-icon svg{width:18px;height:18px;margin-right:6px;vertical-align:text-bottom}.question-body{background:var(--ra-bg-card);border:1px solid var(--ra-border);border-radius:20px;padding:26px;display:grid;gap:18px;box-shadow:0 12px 28px var(--ra-cream-shadow)}.mode-article .question-body{padding:18px;border-radius:14px;box-shadow:none}.question-body h3{margin:0;font-size:1.18rem;color:var(--ra-text)}.question-options{display:grid;gap:12px}.choice-btn{display:flex;justify-content:space-between;align-items:center;padding:14px 16px;border-radius:16px;border:1px solid var(--ra-border);background:var(--ra-soft-white);cursor:pointer;transition:border-color .2s ease,transform .2s ease,box-shadow .2s ease,background .2s ease}.mode-article .choice-btn{padding:12px 14px;border-radius:12px;box-shadow:none}.choice-btn span{display:block;font-size:.85rem;color:var(--ra-muted)}.choice-btn strong{font-size:.98rem;color:var(--ra-text)}.choice-btn:hover,.choice-btn:focus-visible{border-color:var(--ra-border-strong);transform:translateY(-1px);box-shadow:0 14px 32px var(--ra-cream-shadow)}.mode-article .choice-btn:hover,.mode-article .choice-btn:focus-visible{box-shadow:none;transform:translateY(-1px)}.choice-btn.selected{border-color:var(--ra-accent);box-shadow:0 0 0 4px var(--ra-cream-glow);background:var(--ra-bg-card)}.mode-article .choice-btn.selected{box-shadow:0 0 0 3px #f0944e29}.results-summary{display:grid;gap:18px}.diagnosis-card{display:grid;grid-template-columns:auto 1fr;gap:14px;padding:20px;border-radius:20px;border:1px solid var(--ra-border);background:var(--ra-bg-soft);position:relative;box-shadow:0 12px 26px #3c24120f}.mode-article .diagnosis-card{border-radius:14px;box-shadow:none;background:var(--ra-soft-white)}.diagnosis-card[data-tone=warning]{border-color:#ffb74db3;background:#fff2de}.diagnosis-card[data-tone=critical]{border-color:#ff8c70b3;background:#ffe7de}.diagnosis-card[data-tone=success]{border-color:#98de8bb3;background:#f2fbe9}.diagnosis-icon{font-size:2rem;line-height:1}.diagnosis-card h4{margin:0;font-size:1.1rem;font-weight:700;color:#0f172a}.diagnosis-card p{margin:6px 0 0;color:var(--ra-muted);font-size:.94rem}.diagnosis-card .source{margin-top:8px;font-size:.8rem;color:#7a6251bf}.score-pill{position:absolute;top:16px;right:16px;padding:6px 12px;border-radius:999px;font-weight:700;font-size:.8rem;background:#ff6b001f;color:var(--ra-accent)}.overall-score{padding:18px;border-radius:16px;background:var(--ra-bg-card);border:1px solid var(--ra-border);box-shadow:0 12px 28px var(--ra-cream-shadow);display:flex;flex-direction:column;gap:6px}.mode-article .overall-score{border-radius:14px;box-shadow:none}.overall-score strong{font-size:1.15rem}.cta-grid{display:grid;gap:14px;margin-top:20px}.cta-card{display:grid;gap:18px;padding:20px;border-radius:20px;border:1px solid var(--ra-border);background:var(--ra-bg-card);box-shadow:0 14px 34px #ff8c402e}.mode-article .cta-card{border-radius:14px;box-shadow:none;background:var(--ra-soft-white)}.cta-card .cta-intro{display:flex;align-items:center;gap:14px}.cta-icon-pill{display:inline-flex;align-items:center;justify-content:center;width:48px;height:48px;border-radius:16px;background:var(--ra-bg-soft);border:1px solid var(--ra-border);color:var(--ra-accent);font-size:1.45rem;flex-shrink:0}.cta-card .cta-copy{display:grid;gap:6px}.cta-card h5{margin:0;font-size:1.02rem;color:var(--ra-text)}.cta-card p{margin:0;font-size:.9rem;color:var(--ra-muted)}.cta-card .lead-copy{font-size:.9rem;color:var(--ra-muted)}.cta-card[data-lead-status=success]{box-shadow:0 12px 30px #78c76333}.link-cta{justify-self:flex-start;padding:0;border:none;font-weight:700;color:var(--ra-accent);text-decoration:underline;background:transparent}.link-cta:hover,.link-cta:focus-visible{color:var(--ra-accent-dark);transform:translate(2px)}.lead-form{display:grid;gap:16px}.form-grid{display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(210px,1fr))}.form-grid label{display:grid;gap:6px;font-size:.85rem;color:var(--ra-muted)}.form-grid input{border:1px solid var(--ra-border);border-radius:14px;padding:12px 14px;background:var(--ra-soft-white);color:var(--ra-text);transition:border-color .2s ease,box-shadow .2s ease,background .2s ease;width:100%}.form-grid input:hover{border-color:var(--ra-border-strong);box-shadow:0 0 0 4px var(--ra-cream-glow)}.form-grid input[readonly]{background:#fff7f2e6;cursor:not-allowed}.lead-form .primary-btn{justify-self:flex-start}.lead-feedback{display:flex;align-items:center;gap:12px;border-radius:16px;border:1px solid var(--ra-border);background:var(--ra-bg-soft);padding:12px 14px;font-size:.9rem;color:var(--ra-text)}.lead-feedback.error{border-color:#ff8c70b3;background:#ffe7de;color:#a13a22}.feedback-icon{display:inline-flex;align-items:center;justify-content:center;width:28px;height:28px;border-radius:10px;background:#ff6b001f;color:var(--ra-accent);font-weight:700}.lead-feedback.error .feedback-icon{background:#ff8c7033;color:#a13a22}.modal footer{padding:20px 32px 26px;border-top:1px solid var(--ra-border);background:var(--ra-bg-soft);display:flex;justify-content:space-between;align-items:center;gap:12px;font-size:.85rem;color:var(--ra-muted)}.mode-article .modal footer{padding:14px 18px 16px;background:transparent}.footer-reminder{font-weight:600;color:var(--ra-text)}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes slideIn{0%{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}@media (prefers-color-scheme: dark){#ra{--ra-text: #f5f1ea;--ra-muted: #cbd5e1;--ra-bg-card: #111827;--ra-bg-soft: #0b1220;--ra-border: #1f2a3a;--ra-border-strong: #334155;--ra-soft-white: #0f172a}#ra.mode-article{--ra-text: #f8f6f1;--ra-muted: #c7ced8;--ra-bg-card: #0f172a;--ra-bg-soft: #111827;--ra-border: #1f2937;--ra-border-strong: #2b3848;--ra-cream-shadow: rgba(0, 0, 0, .4);--ra-cream-glow: rgba(240, 148, 78, .22)}.micro-benefits li{background:#ffffff0a}.article-preview:hover,.article-preview:focus-visible{background:#111827}}@media (max-width: 600px){.widget-card{padding:24px}.widget-card h3{font-size:1.25rem}.modal{width:min(920px,92vw);max-height:90vh;border-radius:16px}.modal header,.modal main,.modal footer{padding-left:22px;padding-right:22px}.modal header{padding-top:24px}.categories-grid{grid-template-columns:repeat(auto-fit,minmax(150px,1fr))}.question-body{padding:22px}.cta-card{padding:18px}.lead-form .primary-btn{width:100%;justify-content:center}.form-grid{grid-template-columns:1fr}}',W=(e={})=>e.apiBase||"https://romandeassure.ch/api";async function de(e={},o={}){const d=`${W(e)}/insurances/checkup`,u={"Content-Type":"application/json"};e.apiKey&&(u["X-API-Key"]=e.apiKey);try{return(await fetch(d,{method:"POST",headers:u,body:JSON.stringify(o)})).ok}catch(p){return console.error("RA widget â€“ submitCheckup failed",p),!1}}async function le(e={},o={}){const d=`${W(e)}/insurances/leads`,u={"Content-Type":"application/json"};e.apiKey&&(u["X-API-Key"]=e.apiKey);try{return(await fetch(d,{method:"POST",headers:u,body:JSON.stringify(o)})).ok}catch(p){return console.error("RA widget â€“ submitLead failed",p),!1}}const M={auto:'<svg aria-hidden="true" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"><path d="M4.5 13.5h15l-.9-3.6a2 2 0 0 0-1.9-1.5H7.3a2 2 0 0 0-1.9 1.5z"></path><path d="M6 17.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm12 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3ZM5.5 13.5l-.8-2.8M18.5 13.5l.8-2.8M9 9.5l.6-2.2"></path></svg>',habitation:'<svg aria-hidden="true" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"><path d="m4 11 8-6 8 6"></path><path d="M6.5 10.5V18a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-7.5"></path><path d="M10 17v-3.5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1V17"></path></svg>',sante:'<svg aria-hidden="true" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3 4.5 7v5.5c0 4.2 3.1 8 7.5 8s7.5-3.8 7.5-8.1V7z"></path><path d="M9.5 12h5m-2.5-2.5V14"></path></svg>'},X={home:{title:"Bilan express de vos assurances ðŸ“Š",subtitle:"RÃ©pondez Ã  quelques questions pour dÃ©couvrir oÃ¹ vous pourriez Ã©conomiser jusqu'Ã  1â€¯000Â â‚¬ par an.",startCta:"Commencer le diagnostic",actionsCta:"Voir mes actions concrÃ¨tes"},article:{title:"Analyse rapide de vos assurances",subtitle:"Une mini vÃ©rification en 2 minutes pour confirmer que vous ne surpayez pas vos contrats.",startCta:"Commencer mon check-up",actionsCta:"Mes pistes d'optimisation",bridge:"Si vous voulez savoir si vous payez trop vos primes, voici un outil discret pour vÃ©rifier en quelques clics.",previewLead:"VÃ©rifiez en douceur si vos assurances sont toujours au bon prix.",previewCta:"Lancer mon analyse",microBenefits:["Conseil local et neutre","Moins de 2Â minutes","Aucune dÃ©marche engagÃ©e"]}},_={auto:{label:"Assurance Auto",icon:"ðŸš—",articleIcon:M.auto,savings:400,ctaLabel:"Planifier un rappel auto",ctaUrl:"https://romandeassure.ch/fr/assurance-auto",source:"SourceÂ : lesfurets.com",leadCopy:"Un conseiller Romande Assure vous aide Ã  verrouiller le meilleur tarif auto.",leadSuccess:"MerciÂ ! Un expert auto vous contactera sous 24Â h pour finaliser votre comparaison.",questions:[{id:"auto_last_review",title:"Depuis combien de temps n'avez-vous pas comparÃ© votre assurance autoÂ ?",subtitle:"Une mise Ã  jour rÃ©guliÃ¨re vous protÃ¨ge contre les hausses silencieuses.",options:[{value:"less_1",label:"Moins d'1 an",detail:"Je suis Ã  jour",score:5},{value:"1_3",label:"Entre 1 et 3 ans",detail:"Cela fait un moment",score:3},{value:"more_3",label:"Plus de 3 ans",detail:"Je n'ai jamais revu mon contrat",score:1}]},{id:"auto_satisfaction",title:"ÃŠtes-vous satisfait du prix de votre assurance autoÂ ?",subtitle:"Votre ressenti est un excellent signal pour dÃ©clencher une renÃ©gociation.",options:[{value:"yes",label:"Oui, tout va bien",detail:"Je pense Ãªtre bien positionnÃ©",score:5},{value:"unsure",label:"Je ne sais pas",detail:"Je n'ai pas comparÃ© rÃ©cemment",score:3},{value:"no",label:"Non, je paie trop",detail:"Je soupÃ§onne un tarif Ã©levÃ©",score:1}]}],evaluate:e=>{const o=e.auto_last_review,c=e.auto_satisfaction;return o==="less_1"&&c==="yes"?{tone:"success",headline:"Bravo, vous gardez votre contrat auto sous contrÃ´le âœ…",message:"Continuez Ã  comparer chaque annÃ©e pour ne jamais manquer une opportunitÃ©. Une vigilance rÃ©guliÃ¨re Ã©vite les hausses surprises."}:o==="more_3"||c==="no"?{tone:"critical",headline:"Votre assurance auto mÃ©rite une comparaison immÃ©diateÂ ! âš ï¸",message:"Les automobilistes qui relancent leurs comparatifs Ã©conomisent en moyenne ~400Â â‚¬ par an. Plus vous attendez, plus la facture grimpe. Ne laissez pas ces Ã©conomies filer."}:{tone:"warning",headline:"Un check-up auto peut dÃ©bloquer plusieurs centaines d'euros",message:"Si votre contrat a plus d'un an, une comparaison maintenant peut dÃ©gager jusqu'Ã  400Â â‚¬ d'Ã©conomies annuelles. Prenez 2 minutes pour valider que vous Ãªtes bien couvert."}}},habitation:{label:"Assurance Habitation",icon:"ðŸ¡",articleIcon:M.habitation,savings:450,ctaLabel:"Planifier un rappel habitation",ctaUrl:"https://romandeassure.ch/fr/assurance-habitation",source:"SourceÂ : echangesassurances.org",leadCopy:"Nos conseillers ajustent votre couverture habitation sans stress.",leadSuccess:"MerciÂ ! Un expert habitation vous rappelle rapidement pour optimiser votre contrat.",questions:[{id:"home_last_review",title:"Quand avez-vous renÃ©gociÃ© votre assurance habitation pour la derniÃ¨re foisÂ ?",subtitle:"Les garanties Ã©voluent, vos besoins aussi.",options:[{value:"less_1",label:"Cette annÃ©e",detail:"Je viens de comparer",score:5},{value:"1_2",label:"Il y a 1 Ã  2 ans",detail:"Un rafraÃ®chissement ne ferait pas de mal",score:3},{value:"more_2",label:"Plus de 2 ans",detail:"Je n'ai rien changÃ© depuis longtemps",score:1}]},{id:"home_satisfaction",title:"ÃŠtes-vous satisfait du niveau de couverture et du prixÂ ?",subtitle:"Un contrat trop cher ou mal calibrÃ© coÃ»te cher en cas de sinistre.",options:[{value:"yes",label:"Oui, je suis serein",detail:"Mon prix est cohÃ©rent",score:5},{value:"unsure",label:"Je ne sais pas",detail:"Je n'ai jamais regardÃ© en dÃ©tail",score:2},{value:"no",label:"Non, je doute",detail:"Je crains de payer trop",score:1}]}],evaluate:e=>{const o=e.home_last_review,c=e.home_satisfaction;return o==="less_1"&&c==="yes"?{tone:"success",headline:"Votre couverture habitation est bien tenue ðŸ‘",message:"Restez attentif aux Ã©volutions de valeur de vos biens et programmez une vÃ©rification annuelle pour conserver vos avantages."}:o==="more_2"||c==="no"?{tone:"critical",headline:"Votre logement peut cacher 450Â â‚¬ d'Ã©conomies potentielles",message:"Les propriÃ©taires qui renÃ©gocient leur assurance habitation Ã©conomisent en moyenne 450Â â‚¬ la premiÃ¨re annÃ©e. Actualisez votre contrat pour ne plus surpayer."}:{tone:"warning",headline:"Bonne idÃ©e de revisiter votre assurance habitation",message:"Une mise Ã  jour rapide sÃ©curise vos biens et peut allÃ©ger la facture. Comparez les offres pour vÃ©rifier si votre budget est optimisÃ©."}}},sante:{label:"Assurance SantÃ© (LAMal)",icon:"ðŸ©º",articleIcon:M.sante,savings:416,ctaLabel:"AccÃ©der au comparateur LAMal",ctaUrl:"https://romandeassure.ch/fr/comparateur-lamal",source:"SourcesÂ : echangesassurances.org & lesfurets.com",questions:[{id:"health_compare",title:"Avez-vous comparÃ© les primes de votre caisse maladie cette annÃ©eÂ ?",subtitle:"Les primes Ã©voluent tous les ans : rester immobile coÃ»te cher.",options:[{value:"yes",label:"Oui, rÃ©cemment",detail:"Je suis les primes de prÃ¨s",score:5},{value:"plan",label:"C'est prÃ©vu bientÃ´t",detail:"Je dois encore le faire",score:3},{value:"no",label:"Non, pas encore",detail:"Je n'ai pas eu le temps",score:1}]},{id:"health_priority",title:"Quel est votre objectif principalÂ ?",subtitle:"Indiquez votre prioritÃ© pour adapter la recommandation.",options:[{value:"price",label:"RÃ©duire ma prime",detail:"Je veux payer moins",score:1},{value:"coverage",label:"AmÃ©liorer ma couverture",detail:"Je cherche de meilleures garanties",score:3},{value:"stability",label:"Trouver un Ã©quilibre",detail:"Je veux optimiser prix + service",score:4}]}],evaluate:e=>{const o=e.health_compare;return o==="yes"?{tone:"success",headline:"Vous maÃ®trisez vos primes santÃ© ðŸŽ¯",message:"Continuez Ã  challenger votre caisse chaque automne. Quelques minutes suffisent pour confirmer que vous payez le juste prix."}:o==="no"?{tone:"critical",headline:"Votre caisse maladie peut coÃ»ter des centaines de francs de trop",message:"Moins de 15Â % des assurÃ©s comparent chaque annÃ©e alors que les Ã©conomies peuvent dÃ©passer 400Â CHF. Lancez une comparaison pour reprendre la main."}:{tone:"warning",headline:"DerniÃ¨re ligne droite pour valider vos primes santÃ©",message:"Comparer maintenant permet souvent d'Ã©conomiser plusieurs centaines de francs sans sacrifier votre couverture. Ne laissez pas passer la prochaine Ã©chÃ©ance."}}}},Z=Object.entries(_),ee="sante",ue="/fr/comparateur-lamal",pe={ui_style:"soft-card",aura:"blue",variant:"capture-like"},fe=(e=[])=>e.map(o=>`<li>${o}</li>`).join(""),be=e=>{const o=X[e]||X.home,c=fe(o.microBenefits),d=`
    <div class="modal" id="ra-modal" role="dialog" aria-modal="true" aria-labelledby="ra-modal-title">
      <header>
        <h2 id="ra-modal-title">${o.title}</h2>
        <p>${o.subtitle}</p>
        <div class="progress-bar"><span data-progress-bar></span></div>
        <div class="progress-label" data-progress-label>Ã‰tape 1 sur 4</div>
      </header>
      <main>
        <section class="step active" data-step="categories">
          <p>SÃ©lectionnez les assurances que vous souhaitez analyser. Vous pouvez en choisir plusieurs.</p>
          <div class="categories-grid" data-categories></div>
          <div class="step-actions">
            <button type="button" class="primary-btn" data-action="start" disabled>${o.startCta}</button>
          </div>
        </section>
        <section class="step" data-step="question">
          <div class="question-header">
            <div data-question-context></div>
            <div data-question-progress></div>
          </div>
          <div class="question-body">
            <h3 data-question-title></h3>
            <p data-question-subtitle></p>
            <div class="question-options" data-question-options></div>
          </div>
          <div class="step-actions">
            <button type="button" class="secondary-btn" data-action="back">Retour</button>
          </div>
        </section>
        <section class="step" data-step="results">
          <div class="overall-score">
            <strong data-overall-score></strong>
            <span data-overall-text></span>
          </div>
          <div class="results-summary" data-results></div>
          <div class="step-actions">
            <button type="button" class="primary-btn" data-action="to-cta">${o.actionsCta}</button>
          </div>
        </section>
        <section class="step" data-step="actions">
          <div class="overall-score">
            <strong data-total-savings></strong>
            <span data-total-text></span>
          </div>
          <div class="cta-grid" data-cta-grid></div>
        </section>
      </main>
      <footer>
        <div class="footer-reminder">Ne laissez pas des centaines d'euros s'Ã©chapper ðŸ’¡</div>
        <div>Processus 100Â % gratuit â€“ aucune obligation</div>
      </footer>
    </div>
  `,u=`
    <div class="modal-backdrop" data-modal hidden>
      ${e==="article"&&c?`<div class="micro-benefits" aria-label="Avantages">${c}</div>`:""}
      ${d}
    </div>
  `;return e==="article"?`
      <div class="ra360 mode-article">
        <p class="article-bridge">${o.bridge}</p>
        <button type="button" class="article-preview" data-article-preview>
          <span class="outline-icon" aria-hidden="true">${M.sante}</span>
          <span class="preview-text">${o.previewLead}</span>
          <span class="preview-cta">${o.previewCta}</span>
        </button>
        <div class="article-panel" data-article-panel hidden>
          <div class="article-panel-head">
            <div class="panel-kicker">Analyse personnelle</div>
            <div class="panel-title">RÃ©pondez Ã  4 Ã©tapes pour obtenir votre synthÃ¨se.</div>
            <button type="button" class="text-btn" data-article-close aria-label="Replier l'outil">Fermer</button>
          </div>
          ${u}
        </div>
      </div>
    `:`
    <div class="ra360 mode-home">
      ${u}
    </div>
  `},P=window.__raSentEvents||new Set;window.__raSentEvents=P;function x(e,o={},c=!0){try{if(!Array.isArray(window.dataLayer)||c&&P.has(e))return;window.dataLayer.push({event:e,...pe,...o}),c&&P.add(e)}catch(d){console.error("RA widget â€“ dataLayer push error",d)}}function me(e){const c=Array.from(e.querySelectorAll('a[href], button, textarea, input, select, [tabindex]:not([tabindex="-1"])')).filter(h=>!h.hasAttribute("disabled"));if(!c.length)return;const d=c[0],u=c[c.length-1],p=h=>{h.key==="Tab"&&(h.shiftKey?document.activeElement===d&&(h.preventDefault(),u.focus()):document.activeElement===u&&(h.preventDefault(),d.focus()))};e.__trapHandler=p,e.addEventListener("keydown",p)}function ge(e){e!=null&&e.__trapHandler&&(e.removeEventListener("keydown",e.__trapHandler),delete e.__trapHandler)}function ae(e,o){if(!e)return;const c=e.querySelector("[data-modal]"),d=220;if(o){c&&(c.hidden=!1),e.hidden=!1,e.style.maxHeight="0px",e.style.opacity="0",requestAnimationFrame(()=>{e.classList.add("open"),e.style.maxHeight=`${e.scrollHeight}px`,e.style.opacity="1"}),setTimeout(()=>{e.style.maxHeight="none"},d);return}e.style.maxHeight=`${e.scrollHeight}px`,e.style.opacity="1",requestAnimationFrame(()=>{e.classList.remove("open"),e.style.maxHeight="0px",e.style.opacity="0"}),setTimeout(()=>{e.hidden=!0,c&&(c.hidden=!0),e.style.maxHeight=""},d)}function ve(e,o="home"){const c=o==="article";e.innerHTML=Z.map(([d,u])=>{const p=c&&u.articleIcon?u.articleIcon:u.icon;return`
      <button type="button" class="category-option" data-category="${d}" aria-pressed="false">
        <div class="category-icon">${p}</div>
        <div>${u.label}</div>
        <span>Jusqu'Ã  ${u.savings}Â ${d==="sante"?"CHF":"â‚¬"} d'Ã©conomies</span>
      </button>
    `}).join("")}function he(){const e={};for(const[o,c]of Z)e[o]=c.questions.reduce((d,u)=>{const p=Math.max(...u.options.map(h=>h.score));return d+p},0);return e}const xe=he();function ye(e,o={}){const c=o.mode==="article"?"article":"home";e.innerHTML=be(c),e.classList.add(`mode-${c}`);const d=e.querySelector("[data-modal]"),u=e.querySelector(".modal"),p=e.querySelector("[data-progress-bar]"),h=e.querySelector("[data-progress-label]"),ke=Array.from(e.querySelectorAll(".step")),g=e.querySelector("[data-categories]"),A=e.querySelector('[data-action="start"]'),U=e.querySelector('[data-action="back"]'),B=e.querySelector('[data-action="to-cta"]'),D=e.querySelector("[data-question-title]"),I=e.querySelector("[data-question-subtitle]"),w=e.querySelector("[data-question-options]"),j=e.querySelector("[data-question-context]"),V=e.querySelector("[data-question-progress]"),te=e.querySelector("[data-results]"),re=e.querySelector("[data-overall-score]"),oe=e.querySelector("[data-overall-text]"),se=e.querySelector("[data-total-savings]"),ne=e.querySelector("[data-total-text]"),z=e.querySelector("[data-cta-grid]"),S=e.querySelector("[data-article-panel]"),T=e.querySelector("[data-article-preview]"),Y=e.querySelector("[data-article-close]"),Q=c==="article"?null:o.trigger||"#diag360",y=Q?document.querySelector(Q):null;let H=null;ve(g,c);const a={categories:new Set,questionQueue:[],answers:{},scores:{},answerScores:{},currentStep:"categories",currentQuestionIndex:0,openedAt:null,questionStart:null,hasResults:!1,leadStatus:{},gtmSessionId:null,mode:c},Se=()=>{var t;if(o!=null&&o.gtmSessionId)return o.gtmSessionId;try{const r=(window==null?void 0:window.google_tag_manager)||{};for(const i of Object.keys(r)){if(!i.startsWith("GTM-"))continue;const s=(t=r[i])==null?void 0:t.dataLayer;if(s!=null&&s.get){const n=s.get("gtm.sessionId");if(n)return n}}}catch(r){console.warn("RA widget â€“ unable to read GTM session",r)}if(Array.isArray(window.dataLayer))for(let r=window.dataLayer.length-1;r>=0;r-=1){const i=window.dataLayer[r];if(i&&i["gtm.sessionId"])return i["gtm.sessionId"]}return null};a.gtmSessionId=Se();const qe=()=>3+a.questionQueue.length,_e=()=>{switch(a.currentStep){case"categories":return 1;case"question":return 2+a.currentQuestionIndex;case"results":return a.questionQueue.length+2;case"actions":return a.questionQueue.length+3;default:return 1}},Ae=()=>{const t=Math.max(qe(),4),r=Math.min(_e(),t),i=Math.max(8,Math.round(r/t*100));p&&(p.style.width=`${i}%`),h&&(h.textContent=`Ã‰tape ${r} sur ${t}`)},q=t=>{var r;if(a.currentStep=t,ke.forEach(i=>{i.classList.toggle("active",i.dataset.step===t)}),Ae(),t==="categories"){const i=g==null?void 0:g.querySelector("button");i==null||i.focus()}else t==="question"?(r=w==null?void 0:w.querySelector(".choice-btn.selected"))==null||r.focus():t==="results"&&e.querySelector('[data-action="to-cta"]').focus({preventScroll:!0})},ie=()=>{if(a.categories.clear(),a.questionQueue=[],a.answers={},a.scores={},a.answerScores={},a.currentQuestionIndex=0,a.openedAt=null,a.questionStart=null,a.hasResults=!1,a.leadStatus={},g==null||g.querySelectorAll(".category-option").forEach(t=>{t.classList.remove("active"),t.setAttribute("aria-pressed","false")}),A.disabled=!0,te.innerHTML="",re.textContent="",oe.textContent="",se.textContent="",ne.textContent="",z.innerHTML="",D.textContent="",I.textContent="",w.innerHTML="",j.textContent="",V.textContent="",q("categories"),a.mode==="article"&&S){S.classList.remove("open");const t=S.querySelector("[data-modal]");t&&(t.hidden=!0),S.hidden=!0,S.style.maxHeight="",S.style.opacity=""}},F=()=>{d&&(a.mode==="article"&&ae(S,!0),H=document.activeElement,d.hidden=!1,d.classList.add("open"),a.mode!=="article"&&me(u),a.openedAt=Date.now(),x("ra360_open",{opened_at:new Date().toISOString()},!1),setTimeout(()=>{var t;(t=g==null?void 0:g.querySelector("button"))==null||t.focus({preventScroll:!0})},50))},G=(t="close")=>{if(!d||!d.classList.contains("open")&&a.mode!=="article")return;a.mode!=="article"?(ge(u),d.classList.remove("open"),d.hidden=!0):(ae(S,!1),d.classList.remove("open")),a.hasResults||x("ra360_abandon",{step_abandon:a.currentStep},!1),ie();const r=H&&document.contains(H)?H:y||T;r==null||r.focus({preventScroll:!0})},ze=()=>{a.questionQueue=[],a.categories.forEach(t=>{_[t].questions.forEach(i=>{a.questionQueue.push({category:t,question:i})})})},R=()=>{var m,k;const t=a.questionQueue[a.currentQuestionIndex];if(!t)return;const{category:r,question:i}=t,s=_[r],n=a.mode==="article"&&s.articleIcon?s.articleIcon:s.icon;if(j&&(j.innerHTML=`${n} ${s.label}`,j.classList.toggle("has-outline-icon",!!(a.mode==="article"&&s.articleIcon))),D&&(D.textContent=i.title),I&&(I.textContent=i.subtitle||"",I.style.display=i.subtitle?"block":"none"),V){const f=a.currentQuestionIndex+1;V.textContent=`Question ${f} sur ${a.questionQueue.length}`}const l=(m=a.answers[r])==null?void 0:m[i.id];w.innerHTML=i.options.map(f=>`
      <button type="button" class="choice-btn${f.value===l?" selected":""}" data-value="${f.value}" data-score="${f.score}">
        <strong>${f.label}</strong>
        <span>${f.detail}</span>
      </button>
    `).join(""),Array.from(w.querySelectorAll(".choice-btn")).forEach(f=>{f.addEventListener("click",()=>{const L=f.dataset.value,C=Number(f.dataset.score||0);a.answers[r]={...a.answers[r]||{},[i.id]:L};const $=a.answerScores[r]||{},O=$[i.id]||0;a.answerScores[r]={...$,[i.id]:C},a.scores[r]=Math.max(0,(a.scores[r]||0)-O+C),w.querySelectorAll(".choice-btn").forEach(E=>E.classList.remove("selected")),f.classList.add("selected"),setTimeout(()=>{if(a.currentQuestionIndex+=1,a.currentQuestionIndex>=a.questionQueue.length){const E=Math.max(1,Math.round((Date.now()-(a.questionStart||Date.now()))/1e3));x("ra360_questions_completed",{nombre_questions:a.questionQueue.length,duree_completion:E}),$e()}else R()},180)})});const v=w.querySelector(".choice-btn.selected"),b=w.querySelector(".choice-btn");(k=v||b)==null||k.focus({preventScroll:!0})},Le=t=>{if(!t.length)return{score:0,text:""};const i=t.reduce((l,v)=>l+v.score,0)/t.length,s=Math.round(i*10)/10;let n="Plus le score est Ã©levÃ©, plus vos contrats sont sous contrÃ´le.";return s<=3?n="Alerte : vos contrats nÃ©cessitent une action immÃ©diate pour stopper l'hÃ©morragie.":s<=6?n="Encore un petit effort pour sÃ©curiser vos Ã©conomies potentielles.":s>=8&&(n="Excellent rÃ©flexe ! Continuez Ã  vÃ©rifier vos assurances rÃ©guliÃ¨rement."),{score:s,text:n}},Ce=t=>{if(!z)return;const r=a.leadStatus||(a.leadStatus={}),i=a.gtmSessionId;z.innerHTML=t.map(s=>{const n=s.key===ee,l=["cta-card",n?"is-lamal":"is-lead"],v=s.leadSuccess||"MerciÂ ! Un conseiller vous contactera rapidement.",b=s.leadCopy||"Un expert Romande Assure vous rappelle pour affiner votre contrat en toute sÃ©rÃ©nitÃ©.";return`
      <article class="${l.join(" ")}" data-category="${s.key}">
        <div class="cta-intro">
          <div class="cta-icon-pill" aria-hidden="true"><span>${s.icon}</span></div>
          <div class="cta-copy">
            <h5>${s.label}</h5>
            <p>${s.ctaMessage}</p>
          </div>
        </div>
        ${n?`
          <button type="button" class="link-cta" data-cta-lamal data-url="${s.ctaUrl}">
            ${s.ctaLabel} <span aria-hidden="true">â†’</span>
          </button>
        `:`
          <p class="lead-copy">${b}</p>
          <form class="lead-form" data-service="${s.key}" novalidate>
            <input type="hidden" name="service" value="${s.key}">
            <div class="form-grid">
              <label>
                <span>Nom complet</span>
                <input type="text" name="name" placeholder="Votre nom" autocomplete="name" required>
              </label>
              <label>
                <span>Email ou tÃ©lÃ©phone</span>
                <input type="text" name="email_or_phone" placeholder="vous@exemple.ch / +41â€¦" autocomplete="email" required>
              </label>
              <label>
                <span>NPA ou Canton</span>
                <input type="text" name="npa_or_canton" placeholder="1204 GenÃ¨ve" autocomplete="postal-code" required>
              </label>
              <label>
                <span>Service</span>
                <input type="text" name="service_label" value="${s.label}" readonly aria-readonly="true">
              </label>
            </div>
            <button type="submit" class="primary-btn" data-submit>${s.ctaLabel} <span aria-hidden="true">â†’</span></button>
          </form>
          <div class="lead-feedback success" data-lead-success hidden>
            <div class="feedback-icon" aria-hidden="true">âœ”</div>
            <p>${v}</p>
          </div>
          <div class="lead-feedback error" data-lead-error hidden>
            <div class="feedback-icon" aria-hidden="true">!</div>
            <p>OupsÂ ! Impossible d'envoyer votre demande. Merci de rÃ©essayer.</p>
          </div>
        `}
      </article>
    `}).join(""),Array.from(z.querySelectorAll("[data-cta-lamal]")).forEach(s=>{s.addEventListener("click",()=>{const n=s.dataset.url;if(x("ra360_lamal_redirect",{service:ee,destination:ue},!1),n){const l=window.open(n,"_blank","noopener");l&&(l.opener=null)}})}),Array.from(z.querySelectorAll("form[data-service]")).forEach(s=>{const n=s.dataset.service,l=s.closest(".cta-card"),v=l==null?void 0:l.querySelector("[data-lead-success]"),b=l==null?void 0:l.querySelector("[data-lead-error]"),m=s.querySelector("[data-submit]"),k=f=>{l&&(l.dataset.leadStatus=f,f==="success"?(s.hidden=!0,v&&(v.hidden=!1),b&&(b.hidden=!0)):(s.hidden=!1,v&&(v.hidden=!0),b&&(b.hidden=f!=="error")))};r[n]==="success"&&k("success"),s.addEventListener("submit",async f=>{f.preventDefault(),b&&(b.hidden=!0);const L=new FormData(s),C=String(L.get("name")||"").trim(),$=String(L.get("email_or_phone")||"").trim(),O=String(L.get("npa_or_canton")||"").trim();if(!C||!$||!O){r[n]="error",k("error");return}const E=(m==null?void 0:m.textContent)||"";m&&(m.disabled=!0,m.textContent="Envoi en coursâ€¦");try{const J={service:n,user:{name:C,email_or_phone:$,npa_or_canton:O},source:"ra360_widget",variant:"capture-like",ui_style:"soft-card",aura:"blue"};i&&(J.gtm_session_id=i);const K=await le(o,J);x("ra360_lead_submit",{service:n,submit_status:K?"success":"error"},!1),r[n]=K?"success":"error",k(K?"success":"error")}catch(J){console.error("RA widget â€“ lead submit failed",J),r[n]="error",x("ra360_lead_submit",{service:n,submit_status:"error"},!1),k("error")}finally{m&&(m.disabled=!1,m.textContent=E)}})})},$e=async()=>{a.hasResults=!0;const t=a.categories.size?Array.from(a.categories).map(n=>{const l=_[n],v=a.mode==="article"&&l.articleIcon?l.articleIcon:l.icon,b=l.evaluate(a.answers[n]||{}),m=a.scores[n]||0,k=xe[n]||1,f=Math.max(0,Math.min(10,Math.round(m/k*10)));return{key:n,label:l.label,icon:v,tone:b.tone,headline:b.headline,message:b.message,source:l.source,score:f,savings:l.savings,ctaLabel:l.ctaLabel,ctaUrl:l.ctaUrl,leadCopy:l.leadCopy,leadSuccess:l.leadSuccess,ctaMessage:`DÃ©bloquez jusqu'Ã  ${l.savings}${n==="sante"?" CHF":" â‚¬"} d'Ã©conomies potentielles`,answers:a.answers[n]||{}}}):[];te.innerHTML=t.map(n=>`
      <article class="diagnosis-card" data-tone="${n.tone}">
        <div class="diagnosis-icon">${n.icon}</div>
        <div>
          <h4>${n.headline}</h4>
          <p>${n.message}</p>
          <p class="source">${n.source}</p>
        </div>
        <div class="score-pill">Score ${n.score}/10</div>
      </article>
    `).join("");const r=Le(t);re.textContent=`Score de vigilance assuranceÂ : ${r.score}/10`,oe.textContent=r.text;const i=t.reduce((n,l)=>n+l.savings,0);se.textContent=`Potentiel d'Ã©conomies estimÃ©Â : jusqu'Ã  ${i}Â â‚¬ / CHF`,ne.textContent="Additionnez auto, habitation et santÃ© et vous atteignez facilement 1â€¯000Â â‚¬ d'Ã©conomies annuelles.",Ce(t);const s={assurances_selectionnees:Array.from(a.categories),reponses:a.answers,score_vigilance:r.score,estimation_economies_totales:i,source:o.source||"widgetPageAccueil",variant:"capture-like",ui_style:"soft-card",aura:"blue",timestamp:new Date().toISOString()};x("ra360_results_shown",{potential_savings:i,services:Array.from(a.categories),score_vigilance:r.score}),de(o,s).then(n=>{x("ra360_payload_sent",{status:n?"success":"error"},!1)}).catch(()=>{x("ra360_payload_sent",{status:"error"},!1)}),q("results")};a.mode==="article"&&(T==null||T.addEventListener("click",()=>F()),Y==null||Y.addEventListener("click",()=>G("collapse"))),y?(y.tabIndex<0&&(y.tabIndex=0),y.getAttribute("role")||y.setAttribute("role","button"),y.setAttribute("aria-haspopup","dialog"),y.setAttribute("aria-controls","ra-modal"),y.addEventListener("click",()=>F()),y.addEventListener("keydown",t=>{(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),F())})):Q&&console.warn(`RA widget â€“ trigger selector not found: ${Q}`),g==null||g.addEventListener("click",t=>{const r=t.target.closest(".category-option");if(!r)return;const i=r.dataset.category;_[i]&&(a.categories.has(i)?(a.categories.delete(i),r.classList.remove("active"),r.setAttribute("aria-pressed","false")):(a.categories.add(i),r.classList.add("active"),r.setAttribute("aria-pressed","true")),A.disabled=a.categories.size===0)}),A==null||A.addEventListener("click",()=>{if(!a.categories.size)return;ze(),a.currentQuestionIndex=0,a.questionStart=Date.now();const t=Array.from(a.categories);x("ra360_select",{services:t,count:t.length}),q("question"),R()}),U==null||U.addEventListener("click",()=>{a.currentStep==="question"?a.currentQuestionIndex===0?q("categories"):(a.currentQuestionIndex=Math.max(0,a.currentQuestionIndex-1),R()):a.currentStep==="results"&&(a.currentQuestionIndex=Math.max(0,a.questionQueue.length-1),q("question"),R())}),B==null||B.addEventListener("click",()=>{q("actions")}),d==null||d.addEventListener("click",t=>{a.mode!=="article"&&t.target===d&&G("overlay")}),e.addEventListener("keydown",t=>{t.key==="Escape"&&G("escape")}),ie()}function we(e="#ra",o={}){const c=document.querySelector(e);if(!c)throw new Error(`RA360Widget: selector not found: ${e}`);const d=c.shadowRoot||c.attachShadow({mode:"open"});let u=d.querySelector("style[data-ra-widget-style]");u||(u=document.createElement("style"),u.setAttribute("data-ra-widget-style",""),u.textContent=ce,d.appendChild(u));let p=d.querySelector("#ra");p||(p=document.createElement("div"),p.id="ra",d.appendChild(p)),ye(p,o)}return N.init=we,Object.defineProperty(N,Symbol.toStringTag,{value:"Module"}),N}({});
